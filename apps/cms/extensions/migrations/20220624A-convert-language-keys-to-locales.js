module.exports = {
  async up(knex) {
    const exists = await knex.schema.hasTable('languages')
    if (!exists) return

    await knex('languages').insert([
      { code: 'en-UK', label: 'English', sort: 4 },
      { code: 'es-ES', label: 'Español', sort: 5 },
      { code: 'fr-FR', label: 'Français', sort: 6 },
    ])

    await knex('collections_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('collections_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('collections_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('countries_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('countries_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('countries_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('frequently_asked_questions_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('frequently_asked_questions_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('frequently_asked_questions_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('homepage_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('homepage_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('homepage_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('nft_templates_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('nft_templates_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('nft_templates_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('pack_templates_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('pack_templates_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('pack_templates_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('rarities_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('rarities_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('rarities_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('sets_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('sets_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('sets_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('static_page_translations')
      .where('languages_code', 'en')
      .update({ languages_code: 'en-UK' })
    await knex('static_page_translations')
      .where('languages_code', 'es')
      .update({ languages_code: 'es-ES' })
    await knex('static_page_translations')
      .where('languages_code', 'fr')
      .update({ languages_code: 'fr-FR' })

    await knex('languages').where('code', 'en').del()
    await knex('languages').where('code', 'es').del()
    await knex('languages').where('code', 'fr').del()

    await knex('languages').where('code', 'en-UK').update({ sort: 1 })
    await knex('languages').where('code', 'es-ES').update({ sort: 2 })
    await knex('languages').where('code', 'fr-FR').update({ sort: 3 })
  },

  async down(knex) {
    const exists = await knex.schema.hasTable('languages')
    if (!exists) return

    await knex('languages').insert([
      { code: 'en', label: 'English', sort: 4 },
      { code: 'es', label: 'Español', sort: 5 },
      { code: 'fr', label: 'Français', sort: 6 },
    ])

    await knex('collections_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('collections_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('collections_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('countries_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('countries_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('countries_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('frequently_asked_questions_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('frequently_asked_questions_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('frequently_asked_questions_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('homepage_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('homepage_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('homepage_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('nft_templates_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('nft_templates_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('nft_templates_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('pack_templates_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('pack_templates_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('pack_templates_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('rarities_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('rarities_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('rarities_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('sets_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('sets_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('sets_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('static_page_translations')
      .where('languages_code', 'en-UK')
      .update({ languages_code: 'en' })
    await knex('static_page_translations')
      .where('languages_code', 'es-ES')
      .update({ languages_code: 'es' })
    await knex('static_page_translations')
      .where('languages_code', 'fr-FR')
      .update({ languages_code: 'fr' })

    await knex('languages').where('code', 'en-UK').del()
    await knex('languages').where('code', 'es-ES').del()
    await knex('languages').where('code', 'fr-FR').del()

    await knex('languages').where('code', 'en').update({ sort: 1 })
    await knex('languages').where('code', 'es').update({ sort: 2 })
    await knex('languages').where('code', 'fr').update({ sort: 3 })
  },
}
